class BeforeAfter{constructor(t){this.wrapper=t,this.beforeEl=this.wrapper.querySelector("[ts-before]"),this.afterEl=this.wrapper.querySelector("[ts-after]"),this.sliderEl=this.wrapper.querySelector("[ts-slider]"),this.percentageEl=this.wrapper.querySelector("[ts-percentage]"),this.config={direction:this.wrapper.getAttribute("ts-direction")||"horizontal",showPercentage:"true"===this.wrapper.getAttribute("ts-show-percentage"),initialPosition:parseInt(this.wrapper.getAttribute("ts-initial-position"))||50},this.state={isDragging:!1,position:this.config.initialPosition,bounds:null},this.beforeEl&&this.afterEl&&this.sliderEl?this.init():console.warn("BeforeAfter: Missing required elements")}init(){this.wrapper.style.position="relative",this.wrapper.style.overflow="hidden",this.beforeEl.style.position="absolute",this.beforeEl.style.top="0",this.beforeEl.style.left="0",this.beforeEl.style.width="100%",this.beforeEl.style.height="100%",this.afterEl.style.position="absolute",this.afterEl.style.top="0",this.afterEl.style.left="0",this.afterEl.style.width="100%",this.afterEl.style.height="100%",this.sliderEl.style.position="absolute",this.sliderEl.style.zIndex="10",this.percentageEl&&(this.percentageEl.style.position="absolute",this.percentageEl.style.zIndex="11"),this.updatePosition(this.config.initialPosition),this.bindEvents(),this.calculateBounds(),window.addEventListener("resize",this.handleResize.bind(this))}bindEvents(){this.wrapper.addEventListener("mousedown",this.handleDragStart.bind(this)),document.addEventListener("mousemove",this.handleDrag.bind(this)),document.addEventListener("mouseup",this.handleDragEnd.bind(this)),this.wrapper.addEventListener("touchstart",this.handleDragStart.bind(this),{passive:!0}),document.addEventListener("touchmove",this.handleDrag.bind(this),{passive:!1}),document.addEventListener("touchend",this.handleDragEnd.bind(this)),this.wrapper.addEventListener("click",this.handleClick.bind(this)),this.wrapper.addEventListener("dblclick",this.handleReset.bind(this))}calculateBounds(){const t=this.wrapper.getBoundingClientRect();this.state.bounds={left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width,height:t.height}}handleResize(){this.calculateBounds(),this.updatePosition(this.state.position)}handleDragStart(t){t.target===this.sliderEl&&(this.state.isDragging=!0,this.wrapper.style.cursor="grabbing")}handleDrag(t){if(!this.state.isDragging)return;t.preventDefault();const e=this.calculatePosition(t);this.updatePosition(e)}handleDragEnd(){this.state.isDragging=!1,this.wrapper.style.cursor=""}handleClick(t){if(t.target===this.sliderEl)return;const e=this.calculatePosition(t);this.updatePosition(e)}handleReset(){this.updatePosition(this.config.initialPosition)}calculatePosition(t){const{bounds:e}=this.state,i=t.type.startsWith("touch"),s=i?t.touches[0].clientX:t.clientX,n=i?t.touches[0].clientY:t.clientY;let r;return r="horizontal"===this.config.direction?(s-e.left)/e.width*100:(n-e.top)/e.height*100,Math.max(0,Math.min(100,r))}updatePosition(t){this.state.position=t,requestAnimationFrame((()=>{"horizontal"===this.config.direction?this.beforeEl.style.clipPath=`inset(0 ${100-t}% 0 0)`:this.beforeEl.style.clipPath=`inset(0 0 ${100-t}% 0)`,"horizontal"===this.config.direction?this.sliderEl.style.left=`${t}%`:this.sliderEl.style.top=`${t}%`,this.config.showPercentage&&this.percentageEl&&(this.percentageEl.textContent=`${Math.round(t)}%`)}))}destroy(){window.removeEventListener("resize",this.handleResize.bind(this)),this.wrapper.removeEventListener("mousedown",this.handleDragStart.bind(this)),document.removeEventListener("mousemove",this.handleDrag.bind(this)),document.removeEventListener("mouseup",this.handleDragEnd.bind(this)),this.wrapper.removeEventListener("touchstart",this.handleDragStart.bind(this)),document.removeEventListener("touchmove",this.handleDrag.bind(this)),document.removeEventListener("touchend",this.handleDragEnd.bind(this)),this.wrapper.removeEventListener("click",this.handleClick.bind(this)),this.wrapper.removeEventListener("dblclick",this.handleReset.bind(this)),this.wrapper=null,this.beforeEl=null,this.afterEl=null,this.sliderEl=null,this.percentageEl=null,this.state=null,this.config=null}}document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll('[ts-compare="true"]').forEach((t=>{new BeforeAfter(t)}))}));